<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Unlikely Gems - Scroll Controlled Parallax</title>
    <style>
        /* ... (previous styles remain the same) ... */

        .tree {
            position: absolute;
            background-color: #228B22;
            width: 20%;
            height: 80%;
            bottom: 0;
            right: -20%; /* Start off-screen to the right */
            z-index: 3;
            will-change: transform;
        }
    </style>
</head>
<body>
    <!-- ... (previous HTML structure remains the same) ... -->

    <script>
    document.addEventListener('DOMContentLoaded', () => {
        const parallaxSections = document.querySelectorAll('.parallax-container');

        function updateParallax(section, progress) {
            if (section.id === 'section1') {
                // ... (previous section1 animation remains the same) ...
            } else if (section.id === 'section2') {
                const tree = section.querySelector('.tree');
                
                if (progress <= 0.5) {
                    // First half of the animation: tree enters from the right
                    const entryProgress = progress * 2; // Scale 0-0.5 to 0-1
                    tree.style.transform = `translateX(${(1 - entryProgress) * -100}%)`;
                } else {
                    // Second half: tree moves left and zooms in
                    const exitProgress = (progress - 0.5) * 2; // Scale 0.5-1 to 0-1
                    const moveLeft = 50 * exitProgress; // Move 50% to the left
                    const scale = 1 + exitProgress; // Scale up to 2x size
                    tree.style.transform = `translateX(-${moveLeft}%) scale(${scale})`;
                }
            }
        }

        function handleScroll() {
            parallaxSections.forEach(section => {
                const rect = section.getBoundingClientRect();
                const sectionTop = rect.top;
                const sectionHeight = rect.height;
                const viewportHeight = window.innerHeight;

                if (sectionTop < viewportHeight && sectionTop > -sectionHeight) {
                    const progress = Math.max(0, Math.min(1, -sectionTop / (sectionHeight - viewportHeight)));
                    updateParallax(section, progress);
                }
            });
        }

        window.addEventListener('scroll', handleScroll);

        // Initial call to set positions
        handleScroll();
    });
    </script>
</body>
</html>
